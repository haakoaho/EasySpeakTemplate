import{r as u,L as T,b as C,o as c,w as L,g as n,i as v,f,n as y,t as h,F as O,ak as P,k as $,v as B,x as q,T as _}from"./modules/vue-DqkxHldn.js";import{_ as E}from"./tmi_logo-C7T0A-tB.js";import{_ as F}from"./default-BdcmIEDU.js";import{u as R,f as D}from"./slidev/context-DaAwjvnz.js";import{_ as N}from"./index-z457tj9a.js";import"./modules/shiki-N1X8uLTp.js";const I={class:"slidev-layout default"},j={key:0,class:"speaker-list"},z=["onClick","disabled"],J={key:1,class:"mt-8 text-lg text-red-600 text-center"},x="https://script.google.com/macros/s/AKfycbye3kDgEZcBnyl-bK09cbmRmxFpueFdVi43gQv92EWP8wL1soKtq-B913_F_XhiJOZLAg/exec",K={__name:"slides.md__slidev_23",setup(M){const{$clicksContext:b,$frontmatter:k}=R();b.setup();const r=u([]),s=u("Loading options..."),t=u("info"),l=u(!1),p=u(null),g=u({x:0,y:0});async function w(){l.value=!0,s.value="Fetching speaker list...",t.value="info";try{const e=await(await fetch(`${x}?path=options`)).json();e.status==="success"&&e.options?.length?(r.value=e.options,s.value="Options loaded successfully.",t.value="success"):(s.value=e.message||"No speakers found.",t.value="error")}catch(o){s.value=`Error fetching data: ${o.message}`,t.value="error"}finally{l.value=!1}}async function S(o,e){const a=e.target.getBoundingClientRect();g.value={x:a.left+a.width/2,y:a.top+a.height/2},p.value=o;const m=r.value.filter(i=>i!==o);l.value=!0,s.value=`Disqualifying ${o}...`,t.value="info";try{await fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({options:m}),mode:"no-cors"}),await new Promise(i=>setTimeout(i,1200)),r.value=m,p.value=null,s.value=`Successfully disqualified ${o}. 💥`,t.value="success",setTimeout(async()=>{try{const d=await(await fetch(`${x}?path=options`)).json();d.status==="success"&&d.options?.length&&(d.options.includes(o)?(r.value=d.options,s.value="⚠️ Disqualification may have failed. Refreshed list.",t.value="error"):r.value=d.options)}catch(i){console.error("Background verification failed:",i)}},2e3)}catch(i){p.value=null,s.value=`POST request error: ${i.message}`,t.value="error"}finally{l.value=!1}}return T(w),(o,e)=>(c(),C(F,B(q(_(D)(_(k),22))),{default:L(()=>[e[2]||(e[2]=n("p",null,[n("img",{src:E,alt:"Logo",style:{position:"absolute",top:"1rem",right:"1rem","max-height":"100px"}})],-1)),n("div",I,[e[1]||(e[1]=n("h1",{class:"text-center text-2xl font-bold mb-4"},"Timer's Report on Table Topics",-1)),v(" Status Message "),n("div",{class:y(["p-3 rounded-md mt-4 text-sm text-center",{"bg-blue-100 text-blue-800":t.value==="info","bg-green-100 text-green-800":t.value==="success","bg-red-100 text-red-800":t.value==="error"}])}," Status: "+h(s.value),3),v(" Speaker List "),r.value.length>0?(c(),f("div",j,[(c(!0),f(O,null,P(r.value,a=>(c(),f("div",{key:a,class:y(["speaker-item",{exploding:p.value===a}])},[n("span",null,h(a),1),n("button",{onClick:m=>S(a,m),disabled:l.value,class:y({"bg-red-600 hover:bg-red-700 text-white":!l.value,"bg-gray-400 cursor-not-allowed text-white":l.value})}," 💥 Disqualify ",10,z)],2))),128))])):!l.value&&t.value==="error"?(c(),f("p",J," Could not load speaker options. Check your script URL and logs. ")):v("v-if",!0),v(" Explosion GIF Overlay "),p.value?(c(),f("div",{key:2,class:"explosion-overlay",style:$({left:g.value.x+"px",top:g.value.y+"px"})},[...e[0]||(e[0]=[n("img",{src:"https://media.giphy.com/media/X92pmIty2ZJp6/giphy.gif",alt:"Explosion"},null,-1)])],4)):v("v-if",!0)])]),_:1},16))}},Q=N(K,[["__scopeId","data-v-f6410c4d"]]);export{Q as default};
